<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body >

<canvas id="myChart" width="400" height="150"></canvas>   
     

<div class="table-responsive">
    <table class="table" id=stateWise>
        <thead>
          <tr>
            <th>state</th>
            <th>confirmed</th>
            <th>Active</th>
            <th>deaths</th>
            <th>recovered</th>
          </tr>
        </thead>
    </table>
</div>

<script>
    // world's country wise stats--> "https://api.covid19api.com/";
    // india's overall stats   -->  https://coronavirus-19-api.herokuapp.com/countries/india
    // india's district wise stats   -->  https://api.covid19india.org/state_district_wise.json    -->https://api.covid19india.org/data.json
   
    const url="https://api.covid19india.org/data.json";
    const xlabels=[];const ylabels=[];
    async function getData(){
        const response= await fetch(url);
        const data=await response.json();
        const stateWise=document.getElementById('stateWise');
        
        for(var i=0;i<data.cases_time_series.length;i=i+1){
            xlabels.push(data.cases_time_series[i].date);
        }
        for(var i=0;i<data.cases_time_series.length;i=i+1){
            ylabels.push(data.cases_time_series[i].totalconfirmed);
        }
        
        // var x=0;
        // while(x<=data.statewise[0].confirmed){
        //     ylabels.push(x);
        //     x=x+1000;
        // }ylabels.push(x);
        
        // console.log(data.cases_time_series.length)==76
        for(var i=1;i<=38;i++){
            var x=stateWise.insertRow();
            x.insertCell(0);
            stateWise.rows[i].cells[0].innerHTML=data.statewise[i-1].state;
            x.insertCell(1);
            stateWise.rows[i].cells[1].innerHTML=data.statewise[i-1].confirmed;
            x.insertCell(2);
            stateWise.rows[i].cells[2].innerHTML=data.statewise[i-1].active;
            x.insertCell(3);
            stateWise.rows[i].cells[3].innerHTML=data.statewise[i-1].deaths;
            x.insertCell(4);
            stateWise.rows[i].cells[4].innerHTML=data.statewise[i-1].recovered;
        }
        // return { xlabels, ylabels };
    }
     getData();

// -->>   chart .js

    var ctx = document.getElementById('myChart').getContext('2d');
    // const dataTemps = await getData();
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: xlabels,
            datasets: [{
                label: 'Number of active cases in india',
                data: ylabels,
                fill: false,
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
   
</script>
    
</body>
</html>